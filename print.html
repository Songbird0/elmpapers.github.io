<!DOCTYPE HTML>
<html lang="fr" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="0001.html"><strong aria-hidden="true">1.</strong> Qu'est-ce que je peux trouver ?</a></li><li class="chapter-item expanded "><a href="0002.html"><strong aria-hidden="true">2.</strong> Les fonctions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="0003.html"><strong aria-hidden="true">2.1.</strong> Les déclarations</a></li><li class="chapter-item expanded "><a href="0004.html"><strong aria-hidden="true">2.2.</strong> Annotations dédiées aux signatures</a></li></ol></li><li class="chapter-item expanded "><a href="0005.html"><strong aria-hidden="true">3.</strong> Architecture</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="0006.html"><strong aria-hidden="true">3.1.</strong> Comment le modèle est-il mis à jour ?</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#quest-ce-que-je-peux-trouver-" id="quest-ce-que-je-peux-trouver-">Qu'est-ce que je peux trouver ?</a></h1>
<p>Ce &quot;livre&quot; n'a rien d'un livre, en réalité. Lorsque je débute dans un langage, j'ai toujours tendance à vouloir archiver le plus d'informations possibles à son sujet, notamment pour clarifier des choses que je n'ai pas saisi.
Pour faire court, vous pourrez trouver des réponses à des questions / sujets divers et variés, mais ne vous attendez pas à une organisation digne d'un guide. Il n'y a pas d'ordre précis, donc n'hésitez pas à vous servir du moteur de recherche.
Bonne lecture !</p>
<h1><a class="header" href="#les-fonctions" id="les-fonctions">Les fonctions</a></h1>
<h1><a class="header" href="#les-déclarations" id="les-déclarations">Les déclarations</a></h1>
<p>La déclaration d'une fonction en Elm est plutôt simple... il suffit d'écrire son identificateur suivi d'un <code>=</code>. La dernière expression est la valeur qui sera renvoyée.</p>
<pre><code class="language-elm">votreFonction = &quot;La valeur de renvoi est une String&quot;
</code></pre>
<p>La communauté Elm (ainsi que son développeur) ont, cependant, tendance à &quot;étaler&quot; la déclaration ainsi que le corps des fonctions sur plusieurs lignes.</p>
<pre><code class="language-elm">votreFonction =
  &quot;La valeur de renvoi est une String&quot;
</code></pre>
<h1><a class="header" href="#annotations-dédiées-aux-signatures" id="annotations-dédiées-aux-signatures">Annotations dédiées aux signatures</a></h1>
<p>Le compilateur du langage Elm supporte les annotations permettant de typer la signature d'une fonction, réduisant forcément le temps de débogage. Toutefois, ce type d'annotations peut être relativement ambiguë lorsque vous travaillez avec pour la première fois.</p>
<h2><a class="header" href="#exemple" id="exemple">Exemple</a></h2>
<p>Pour une fonction nommée foo prenant deux Int en paramètre et renvoyant une chaîne de caractères (<code>String</code>), l'annotation devrait ressembler à ça:</p>
<pre><code class="language-elm">foo: Int -&gt; Int -&gt; String
</code></pre>
<p>Ne vous méprenez pas, les <code>-&gt;</code> ne signifient pas obligatoirement un renvoi de valeur. Seule la dernière valeur de l'annotation représente le type de données renvoyé. Cela donnerait:</p>
<pre><code class="language-elm">ag1 -&gt; arg2 -&gt; valeur de retour
</code></pre>
<h1><a class="header" href="#architecture" id="architecture">Architecture</a></h1>
<p>Bien que dénuée d'une réelle organisation, cette section est dédiée à toute les questions que je pourrais me poser à propos du fonctionnement interne du langage Elm ainsi que des outils permettant d'appliquer les modèles <a href="https://stackoverflow.com/questions/28930186/what-is-a-mv-framework"><code>MV*</code></a>.</p>
<h1><a class="header" href="#comment-le-modèle-est-il-mis-à-jour-" id="comment-le-modèle-est-il-mis-à-jour-">Comment le modèle est-il mis à jour ?</a></h1>
<p><img src="./medias/question.png" alt="Ma récente discussion sur le Slack officiel du langage Elm" /></p>
<p>Dernièrement (le 11 avril 2020 donc), cette question me tourmentait depuis quelques jours; toujours très débutant avec Elm (en avouant au passage que la syntaxe me déconcerte un peu), j'ai encore des difficultés à me modéliser <em>où</em>, <em>exactement</em>, mon modèle est traité et mis à jour lorsqu'il transite entre les trois grandes &quot;phases&quot; de la boucle d'exécution:</p>
<ol>
<li><code>init</code>: qui, comme son nom l'indique, prépare la création de notre modèle avant le traitement;</li>
<li><code>view</code>: organisation des données du modèle pour les afficher;</li>
<li><code>update</code>: mise à jour du modèle.</li>
</ol>
<p>Simple, non ? Toutefois, qu'en est-il du passage d'une phase à l'autre, en pratique ?</p>
<p>Prenons <a href="https://elm-lang.org/examples/buttons"><code>un exemple</code></a> simple présenté sur le site officiel. Ici nous créons notre modèle (qui n'est ni plus ni moins qu'un entier); la fonction <code>update</code> reçoit le message renvoyé par le service de callback et incrémente ou décrémente la valeur se trouvant dans notre modèle. Cette fois, ce qui nous intéresse, c'est la fonction <code>view</code> !</p>
<pre><code class="language-elm">

import Browser

import Html exposing (Html, button, div, text)

import Html.Events exposing (onClick)

-- MAIN

main =

  Browser.sandbox { init = init, update = update, view = view }

-- MODEL

type alias Model = Int

init : Model

init =

  0

-- UPDATE

type Msg = Increment | Decrement

update : Msg -&gt; Model -&gt; Model

update msg model =

  case msg of

    Increment -&gt;

      model + 1

    Decrement -&gt;

      model - 1

-- VIEW

view : Model -&gt; Html Msg

view model =

  div []

    [ button [ onClick Decrement ] [ text &quot;-&quot; ]

    , div [] [ text (String.fromInt model) ]

    , button [ onClick Increment ] [ text &quot;+&quot; ]

    ]

</code></pre>
<p>La partie qui m'a le plus intrigué est celle-ci:</p>
<pre><code class="language-elm">view model =

  div []

    [ button [ onClick Decrement ] [ text &quot;-&quot; ]

    , div [] [ text (String.fromInt model) ]

    , button [ onClick Increment ] [ text &quot;+&quot; ]

    ]
</code></pre>
<p>Comment le modèle peut-il être mis à jour, alors que nous ne passons que le <code>Msg</code> à <code>onClick</code> ?</p>
<h2><a class="header" href="#la-réponse" id="la-réponse">La réponse</a></h2>
<p>Lorsque vous passez en paramètre votre implémentation de <code>init</code>, vous ne faites pas que structurer votre modèle - vous permettez également au programme (représenté par la structure que vous avez choisi d'utiliser (qui peut très bien être <code>Browser</code> ou plus généralement <code>Program</code>)) de stocker l'état de votre modèle pour ensuite en informer le reste de l'architecture.</p>
<p>Pour ceux qui auraient besoin d'une illustration pour bien saisir le concept, voici un schéma de mon cru grâce à mes talents en dessin:</p>
<p><img src="./medias/picasso.png" alt="Initialisation du modèle via la fonction 'init', puis réception des messages envoyés par la boucle des événements" /></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        
        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            var socket = new WebSocket("ws://localhost:3001");
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>
        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
